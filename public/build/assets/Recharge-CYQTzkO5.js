import{r as t,j as e}from"./app-BD0sRPWp.js";import{m as y,as as R,at as S,au as C,av as w,aw as E,ax as F,ay as O,g as I}from"./layout-DF5uXK-I.js";import{C as m,b as u,c as h,d as x,a as p,F as L,z as j}from"./index-CL940D6q.js";import{L as l,I as g,B as T,g as V,h as $}from"./apis-6liLtYla.js";import"./createLucideIcon-17Mik4t4.js";const A=[{number:"9876543210",operator:"Airtel",amount:"$25",status:"Success",date:"2024-01-15"},{number:"9876543211",operator:"Jio",amount:"$30",status:"Success",date:"2024-01-14"},{number:"9876543212",operator:"Vi",amount:"$20",status:"Failed",date:"2024-01-13"}];function M({operators:r}){const[n,c]=t.useState(""),[a,f]=t.useState("11"),[o,b]=t.useState(""),[i,d]=t.useState(!1),N=async()=>{if(!n||!a||!o){alert("Please fill all fields");return}try{d(!0);const s=await V({canumber:n,operator:a,amount:o});console.log("Recharge Response:",s?.data?.data?.status)}catch(s){console.error("Recharge error:",s),s?.response?.status==403?j.error(s?.response?.data?.message):j.error("Internal Server Error")}finally{d(!1)}};return e.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Recharge Services"}),e.jsx("p",{className:"text-muted-foreground",children:"Mobile"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Quick Recharge"}),e.jsx(x,{children:"Recharge mobile"})]}),e.jsx(p,{children:e.jsx(R,{defaultValue:"mobile",className:"w-full",children:e.jsxs(S,{value:"mobile",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"mobile",children:"Mobile Number"}),e.jsx(g,{id:"mobile",placeholder:"Enter mobile number",value:n,onChange:s=>c(s.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"operator",children:"Operator"}),e.jsxs(C,{onValueChange:s=>f(s),children:[e.jsx(w,{children:e.jsx(E,{placeholder:"Select operator"})}),e.jsx(F,{children:r&&r.length>0?r.map(s=>e.jsx(O,{value:s.id,children:s.name},s.id)):e.jsx("div",{className:"text-center py-2 text-sm text-muted-foreground",children:"No operators found"})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"dth-amount",children:"Amount"}),e.jsx(g,{id:"dth-amount",placeholder:"Enter amount",value:o,onChange:s=>b(s.target.value)})]}),e.jsx(T,{className:"w-full",onClick:N,disabled:i,children:i?"Processing...":"Recharge Now"})]})})})]}),e.jsxs(m,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Recent Recharges"}),e.jsx(x,{children:"Your recent recharge transactions"})]}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:A.map((s,v)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.number}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[s.operator," â€¢ ",s.date]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-medium",children:s.amount}),e.jsx("p",{className:`text-sm ${s.status==="Success"?"text-green-600":"text-red-600"}`,children:s.status})]})]},v))})})]})]}),e.jsx(L,{})]})}function H(){const[r,n]=t.useState([]);return t.useEffect(()=>{(async()=>{try{const a=await $();n(a?.data?.data?.data)}catch(a){console.error("Error fetching operators:",a)}})()},[]),e.jsx(I,{title:"Recharge",children:e.jsx(M,{operators:r})})}export{H as default};
